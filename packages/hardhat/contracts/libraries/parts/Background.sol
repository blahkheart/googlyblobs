// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

pragma abicoder v2;

/// @title SVG background generator
library Background {
    uint256 constant public bgTypeCount = 4;

    function buildBody(uint256 _id, string memory color)pure public returns(string memory){
        return  _selectBackgroundById( _id, color);
    }

    function getBGTypeNameByIndex(uint256 _id)pure public returns(string memory){
        string[] memory names = new string[](4);
        string memory _bgTypeName;
        names[0] = "Peach Puff";
        names[1] = "Puffy Plop";
        names[2] = "Bouncy Blob";
        names[3] = "Jello Jiggle";
        names[4] = "Puddle Puff";
    
        require(_id > 0 && _id <= names.length, "Invalid Id");
        for(uint i =0; i < names.length; i++){
           // [i + 1] causes index to start from 1 and not 0
           if(_id == (i+1)) _bgTypeName = names[i];
        }
        return _bgTypeName;
    }

    /// @dev Selects a body type based on _id provided
    function _selectBackgroundById(uint256 _id, string memory color)
        private
        pure
        returns (string memory)
    {
        require(_id > 0 && _id <= 4, "Invalid Id");
        if(_id == 1) return base(string(abi.encodePacked(_bg_1(color))));
        if(_id == 2) return base(string(abi.encodePacked(_bg_2(color))));
        if(_id == 3) return base(string(abi.encodePacked(_bg_3(color))));
        return base(string(abi.encodePacked(_bg_4(color))));
    }

    function _bg_1(string memory color) private pure returns (string memory) {
        return string(
            abi.encodePacked(
               '<path d="M289.8071703617852,199.99999999999997C287.72934271932235,219.60071069117248,274.4662404134317,222.95402792158038,260.9031575533701,239.14008274588565C247.34007469330845,255.32613757019092,248.8267177416065,258.07901754192955,231.67967239009246,269.36880638987975C214.53262703857843,280.65859523782996,207.05416793642962,289.5778201627618,187.41582033259556,287.52489209424357C167.7774727287615,285.47196402572536,165.2149395009203,274.9348349175883,147.51532551651792,260.5705432390874C129.8193570829438,246.20625156058642,115.67755263655474,244.89698089123482,111.57595561727791,225.96364204352517C107.47435859800109,207.03030319581552,123.34074664421294,201.68421974506242,129.9370525767601,179.4276624631889C136.53335850930725,157.1711051813154,126.45017504023403,146.31228483063654,139.84583818533716,130.57839654978153C153.2415013304403,114.84450826892652,165.80059169826302,112.24398415700124,187.34703748434495,111.99671268809601C208.89348327042688,111.74944121919079,212.94682637188154,119.45258602739978,232.18774869711692,129.51866168304485C251.4286710223523,139.58473733868993,256.3636014421692,138.69139131928537,269.80813316392516,155.1370369265749C283.2526648856811,171.5826825338644,291.8849980042481,180.39928930882746,289.8071703617852,199.99999999999997C287.72934271932235,219.60071069117248,274.4662404134317,222.95402792158038,260.9031575533701,239.14008274588565" stroke-width="2" stroke="#000000" fill="#',
               color,
               '"></path>'
            )
        );
    }

    function _bg_2(string memory color) private pure returns (string memory) {
        return string(
            abi.encodePacked(
                '<path d="M298.7989965606721,199.99999999999997C297.5716470659935,232.1832662154849,271.54986228906427,260.58415225705346,243.38416979558247,275.1435863301439C215.2184773021007,289.7030204032343,182.71570067645075,287.8258876314809,157.9705340932632,272.79717036545213C133.22536751007567,257.76845309942337,119.14982350077668,228.23809713765286,119.65833687964472,200C120.16685025851277,171.76190286234714,134.54058490973725,148.761233626644,160.51310098760342,131.60668467718784C186.4856170654696,114.45213572773169,221.8637381543618,100.54859218815677,249.52091726897555,114.2272552527192C277.17809638358926,127.90591831728163,300.0263460553507,167.81673378451504,298.7989965606721,199.99999999999997C297.5716470659935,232.1832662154849,271.54986228906427,260.58415225705346,243.38416979558247,275.1435863301439" stroke-width="2" stroke="#000000" fill="#',
                color,
                '"></path>'
            )
        );
    }

    function _bg_3(string memory color) private pure returns (string memory) {
        return string(
            abi.encodePacked(
               '<path d="M304.1919184200394,199.99999999999997C306.3452800696171,227.08021002269817,298.59190669403904,247.21958702102336,279.4453059207707,266.66252689688486C260.29870514750235,286.10546677274635,242.50195621768313,287.7849208592489,215.8229917741856,289.7366455808992C189.14402733068806,291.6883703025495,180.2129084898647,287.66187543718206,156.311623873859,275.67048715065545C132.41033925785328,263.67909886412883,112.93843351564892,256.9362814396297,105.50937046954381,234.3917765661611C98.0803074234387,211.8472716926925,112.60811877351136,198.22253938668177,122.02364058414305,171.61892619618496C131.43916239477474,145.01531300568814,129.0042165879924,122.84779565574539,148.96562498015163,111.60586953309881C168.92703337231086,100.36394341045224,188.03598189116764,113.21771424964275,214.15321777872413,119.73311332243152C240.27045366628062,126.24851239522029,249.99832855299914,124.28578339659943,269.5067136919508,141.67694217673926C289.01509883090245,159.0681009568791,302.03855677046175,172.91978997730178,304.1919184200394,199.99999999999997C306.3452800696171,227.08021002269817,298.59190669403904,247.21958702102336,279.4453059207707,266.66252689688486" stroke-width="2" stroke="#000000" fill="#',
               color,
               '"></path>'
            )
        );
    }
    function _bg_4(string memory color) private pure returns (string memory) {
        return string(
            abi.encodePacked(
               '<path d="M266.90555487192427,199.99999999999997C264.9937176299667,215.71621063607319,266.521987688522,231.3234244994827,259.1590128075511,242.9815387194997C251.79603792658017,254.63965293951668,236.5713836579639,264.85126830984154,222.72770558609866,269.9486853201019C208.88402751423342,275.04610233036226,189.66922818341845,278.11542105847326,176.09694437635974,273.566040781062C162.52466056930103,269.0166605036507,151.70623573050105,254.9134104524779,141.29400274374646,242.65240365563423C130.88176975699187,230.39139685879056,114.93464550518664,215.17003710299483,113.62354645583218,200C112.31244740647773,184.82996289700517,122.78837863869497,163.19517898863205,133.42740844761977,151.63218103766533C144.0664382565446,140.06918308669862,162.27468152436788,135.14108486051444,177.45772530938103,130.62201229419964C192.6407690943942,126.10293972788483,208.99695266604616,121.50736853829976,224.52567115769875,124.51774563977655C240.05438964935135,127.52812274125334,263.5667223069256,136.10389917635646,270.63003625929656,148.68427490306036C277.6933502116675,161.26465062976425,268.81739211388185,184.28378936392676,266.90555487192427,199.99999999999997C264.9937176299667,215.71621063607319,266.521987688522,231.3234244994827,259.1590128075511,242.9815387194997" stroke-width="2" stroke="#000000" fill="#',
               color,
               '"></path>'
            )
        );
    }

     /// @dev The base SVG for the body
    function base(string memory children) private pure returns (string memory) {
        return string(
            abi.encodePacked(
                '<g id="body">',
                children, 
                "</g>"
            )
        );
    }
}